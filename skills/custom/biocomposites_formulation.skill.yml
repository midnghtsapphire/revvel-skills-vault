name: biocomposites_formulation
title: Biocomposites & Eco-Materials Formulation Expert
version: 1.0.0
description: Novel material formulation engine for basalt fiber composites, taro-based biopolymers, and eco-friendly resin
  systems with LCA, cost, and compliance analysis.
metadata:
  author: Kimo
  category: General
  tags:
  - formulation
  - biocomposites
  source: revvel-custom
  created_at: '2026-02-14'
  updated_at: '2026-02-16'
dependencies:
  pip_packages: []
implementation:
  type: python_code
  language: python
  content: "import json\nimport math\nimport random\nimport unittest\nfrom typing import Dict, List, Dict, Any, Tuple\nfrom\
    \ dataclasses import dataclass, asdict\nfrom enum import Enum\n\nSKILL_METADATA = {\n    \"name\": \"Biocomposites & Eco-Materials\
    \ Formulation Expert\",\n    \"version\": \"1.0.0\",\n    \"description\": \"Novel material formulation engine for basalt\
    \ fiber composites, taro-based biopolymers, and eco-friendly resin systems with LCA, cost, and compliance analysis.\"\
    ,\n    \"author\": \"Kimo\",\n    \"tags\": [\"biocomposites\", \"eco-materials\", \"formulation\", \"LCA\", \"optimization\"\
    ]\n}\n\nEXPERT_PROMPTS = {\n    \"formulate_basalt_taro\": \"Formulate a basalt fiber reinforced taro-starch biopolymer\
    \ composite targeting 80 MPa tensile strength with <5% moisture uptake.\",\n    \"optimize_curing\": \"Optimize curing\
    \ profile for bamboo/PLA composite to achieve maximum flexural modulus while minimizing energy use.\",\n    \"predict_properties\"\
    : \"Predict mechanical properties of 30% hemp fiber + 70% PLA composite processed at 185°C, 150 bar.\",\n    \"novel_formulation\"\
    : \"Propose a novel chitosan-lignin-basalt fiber composite with fire-retardant properties not yet reported in literature.\"\
    ,\n    \"lca_analysis\": \"Perform cradle-to-gate LCA for flax/PHA biocomposite and compare to conventional glass/epoxy.\"\
    ,\n    \"cost_optimize\": \"Minimize material cost for jute/PBS composite while maintaining >80% of baseline mechanical\
    \ performance.\",\n    \"degradation_model\": \"Model soil degradation of starch-based bioplastic over 180 days with 25°C,\
    \ 60% RH.\",\n    \"certification_check\": \"Check if basalt/taro composite meets ASTM D6866 and EN 13432 compostability\
    \ criteria.\",\n    \"patent_search\": \"Identify patent gaps for taro-based biopolymer composites in aerospace applications.\"\
    ,\n    \"process_tune\": \"Tune injection molding parameters for 40% basalt fiber + 60% PLA to eliminate voids <1%.\"\n\
    }\n\nINTEGRATION_POINTS = {\n    \"material_db\": \"JSON file storing biopolymer, fiber, additive, and resin data with\
    \ properties and LCA metrics.\",\n    \"optimizer\": \"SciPy-based multi-objective optimizer for cost vs performance vs\
    \ sustainability.\",\n    \"predictor\": \"ML regression model (sklearn) trained on composite property dataset.\",\n \
    \   \"lca_engine\": \"Brightway2 LCA backend with Ecoinvent 3.8 cutoff.\",\n    \"patent_api\": \"Lens.org API for patent\
    \ search and gap analysis.\",\n    \"compliance_api\": \"ASTM/ISO.org web scraping for up-to-date standards.\"\n}\n\n\
    @dataclass\nclass Material:\n    name: str\n    density: float  # g/cm³\n    tensile_strength: float  # MPa\n    elastic_modulus:\
    \ float  # GPa\n    cost: float  # USD/kg\n    biodegrad_days: int  # days for 90% biodegradation\n    lca_ghg: float\
    \  # kg CO2e/kg\n\n@dataclass\nclass Formulation:\n    fibers: Dict[str, float]  # wt %\n    matrix: Dict[str, float]\
    \  # wt %\n    additives: Dict[str, float]  # wt %\n    curing_temp: float  # °C\n    curing_time: float  # min\n    pressure:\
    \ float  # bar\n\nclass BiopolymerDB:\n    _polymers = {\n        \"PLA\": Material(\"PLA\", 1.24, 60, 3.5, 2.2, 180,\
    \ 1.8),\n        \"PHA\": Material(\"PHA\", 1.25, 40, 2.0, 4.0, 90, 1.2),\n        \"PBS\": Material(\"PBS\", 1.26, 35,\
    \ 1.8, 3.5, 120, 2.0),\n        \"starch\": Material(\"starch\", 1.3, 25, 1.2, 1.5, 60, 0.8),\n        \"cellulose\":\
    \ Material(\"cellulose\", 1.45, 80, 8.0, 2.8, 45, 1.0),\n        \"chitosan\": Material(\"chitosan\", 1.4, 55, 4.0, 5.0,\
    \ 30, 1.1),\n        \"lignin\": Material(\"lignin\", 1.35, 30, 2.5, 1.8, 40, 0.7),\n        \"hemp\": Material(\"hemp\"\
    , 1.48, 550, 30, 1.2, 365, 0.9),\n        \"flax\": Material(\"flax\", 1.5, 800, 50, 1.5, 365, 1.0),\n        \"jute\"\
    : Material(\"jute\", 1.45, 400, 20, 0.8, 365, 0.8),\n        \"bamboo\": Material(\"bamboo\", 1.6, 600, 36, 1.0, 270,\
    \ 0.6),\n        \"basalt\": Material(\"basalt\", 2.65, 1800, 90, 3.0, 9999, 2.2),\n        \"taro\": Material(\"taro\"\
    , 1.38, 45, 2.8, 2.0, 45, 0.9)\n    }\n\n    @classmethod\n    def get(cls, name: str) -> Material:\n        return cls._polymers[name]\n\
    \n    @classmethod\n    def list_all(cls) -> List[str]:\n        return list(cls._polymers.keys())\n\ndef rule_of_mixtures(fractions:\
    \ Dict[str, float], props: Dict[str, float]) -> float:\n    return sum(f * props.get(m, 0) for m, f in fractions.items())\n\
    \ndef predict_tensile_strength(form: Formulation) -> float:\n    fiber_vols = {k: form.fibers.get(k, 0) for k in form.fibers}\n\
    \    matrix_vols = {k: form.matrix.get(k, 0) for k in form.matrix}\n    fiber_strengths = {k: BiopolymerDB.get(k).tensile_strength\
    \ for k in fiber_vols}\n    matrix_strengths = {k: BiopolymerDB.get(k).tensile_strength for k in matrix_vols}\n    Vf\
    \ = sum(fiber_vols.values())\n    Vm = sum(matrix_vols.values())\n    if Vf + Vm == 0:\n        return 0\n    sigma_f\
    \ = rule_of_mixtures(fiber_vols, fiber_strengths) / (Vf + 1e-6)\n    sigma_m = rule_of_mixtures(matrix_vols, matrix_strengths)\
    \ / (Vm + 1e-6)\n    return Vf * sigma_f + Vm * sigma_m\n\ndef predict_elastic_modulus(form: Formulation) -> float:\n\
    \    fiber_vols = {k: form.fibers.get(k, 0) for k in form.fibers}\n    matrix_vols = {k: form.matrix.get(k, 0) for k in\
    \ form.matrix}\n    fiber_mod = {k: BiopolymerDB.get(k).elastic_modulus for k in fiber_vols}\n    matrix_mod = {k: BiopolymerDB.get(k).elastic_modulus\
    \ for k in matrix_vols}\n    Vf = sum(fiber_vols.values())\n    Vm = sum(matrix_vols.values())\n    if Vf + Vm == 0:\n\
    \        return 0\n    Ef = rule_of_mixtures(fiber_vols, fiber_mod) / (Vf + 1e-6)\n    Em = rule_of_mixtures(matrix_vols,\
    \ matrix_mod) / (Vm + 1e-6)\n    return Vf * Ef + Vm * Em\n\ndef predict_density(form: Formulation) -> float:\n    all_comp\
    \ = {**form.fibers, **form.matrix, **form.additives}\n    dens = {k: BiopolymerDB.get(k).density for k in all_comp}\n\
    \    total = sum(all_comp.values())\n    if total == 0:\n        return 0\n    return rule_of_mixtures(all_comp, dens)\
    \ / total\n\ndef lca_ghg(form: Formulation) -> float:\n    all_comp = {**form.fibers, **form.matrix, **form.additives}\n\
    \    ghg = {k: BiopolymerDB.get(k).lca_ghg for k in all_comp}\n    total = sum(all_comp.values())\n    if total == 0:\n\
    \        return 0\n    return rule_of_mixtures(all_comp, ghg) / total\n\ndef material_cost(form: Formulation) -> float:\n\
    \    all_comp = {**form.fibers, **form.matrix, **form.additives}\n    costs = {k: BiopolymerDB.get(k).cost for k in all_comp}\n\
    \    total = sum(all_comp.values())\n    if total == 0:\n        return 0\n    return rule_of_mixtures(all_comp, costs)\
    \ / total\n\ndef biodegradation_time(form: Formulation) -> float:\n    matrix_comp = form.matrix\n    biodegrad = {k:\
    \ BiopolymerDB.get(k).biodegrad_days for k in matrix_comp}\n    total = sum(matrix_comp.values())\n    if total == 0:\n\
    \        return 9999\n    return rule_of_mixtures(matrix_comp, biodegrad) / total\n\ndef curing_energy(form: Formulation)\
    \ -> float:\n    T = form.curing_temp\n    t = form.curing_time\n    m = sum(form.fibers.values()) + sum(form.matrix.values())\n\
    \    cp = 1.2  # average J/gK\n    return m * cp * (T - 25) * t / 60  # kJ\n\ndef void_fraction(form: Formulation) ->\
    \ float:\n    return max(0, 0.02 * (200 - form.pressure) / 200)\n\ndef moisture_uptake(form: Formulation) -> float:\n\
    \    starch_like = sum([form.matrix.get(k, 0) for k in [\"starch\", \"taro\"]])\n    return 0.03 * starch_like / 100\n\
    \ndef novelty_score(form: Formulation) -> float:\n    basalt = form.fibers.get(\"basalt\", 0)\n    taro = form.matrix.get(\"\
    taro\", 0)\n    chitosan = form.additives.get(\"chitosan\", 0)\n    lignin = form.additives.get(\"lignin\", 0)\n    score\
    \ = 0\n    if basalt > 0 and taro > 0:\n        score += 0.5\n    if chitosan > 0 and lignin > 0:\n        score += 0.3\n\
    \    if basalt > 0 and chitosan > 0:\n        score += 0.2\n    return min(1.0, score)\n\ndef optimize_formulation(target_strength:\
    \ float, max_cost: float, max_ghg: float) -> Formulation:\n    best = None\n    best_score = -1\n    for _ in range(1000):\n\
    \        f = Formulation(\n            fibers={\"basalt\": random.uniform(0, 40), \"bamboo\": random.uniform(0, 30), \"\
    hemp\": random.uniform(0, 30)},\n            matrix={\"taro\": random.uniform(20, 70), \"PLA\": random.uniform(10, 60),\
    \ \"starch\": random.uniform(0, 20)},\n            additives={\"chitosan\": random.uniform(0, 5), \"lignin\": random.uniform(0,\
    \ 5)},\n            curing_temp=random.randint(160, 200),\n            curing_time=random.randint(5, 30),\n          \
    \  pressure=random.randint(100, 200)\n        )\n        strength = predict_tensile_strength(f)\n        cost = material_cost(f)\n\
    \        ghg = lca_ghg(f)\n        if cost > max_cost or ghg > max_ghg or strength < target_strength:\n            continue\n\
    \        score = strength / (cost * ghg)\n        if score > best_score:\n            best_score = score\n           \
    \ best = f\n    return best or Formulation({}, {}, {}, 180, 15, 150)\n\ndef compliance_check(form: Formulation) -> Dict[str,\
    \ bool]:\n    bio_carbon = sum([form.matrix.get(k, 0) for k in [\"starch\", \"taro\", \"lignin\"]])\n    total_matrix\
    \ = sum(form.matrix.values())\n    biodegradable = bio_carbon / (total_matrix + 1e-6) > 0.5\n    astm_d6866 = biodegradable\n\
    \    en_13432 = biodegradable and biodegradation_time(form) < 180\n    return {\"ASTM_D6866\": astm_d6866, \"EN_13432\"\
    : en_13432}\n\ndef degradation_model(form: Formulation, days: int, temp: float, rh: float) -> float:\n    k = 0.02 * math.exp(0.05\
    \ * (temp - 25)) * (rh / 60)\n    m0 = 100\n    return m0 * math.exp(-k * days)\n\ndef patent_gap_score(form: Formulation)\
    \ -> float:\n    score = novelty_score(form)\n    if score > 0.5:\n        return 0.8\n    return 0.2\n\nclass SkillEngine:\n\
    \    def __init__(self):\n        pass\n\n    def handle(self, prompt: str, context: Dict[str, Any] = None) -> Dict[str,\
    \ Any]:\n        context = context or {}\n        if \"basalt\" in prompt and \"taro\" in prompt and \"80 MPa\" in prompt:\n\
    \            f = optimize_formulation(80, 5, 2)\n            return {\n                \"formulation\": asdict(f),\n \
    \               \"predicted_tensile_strength\": predict_tensile_strength(f),\n                \"predicted_modulus\": predict_elastic_modulus(f),\n\
    \                \"moisture_uptake\": moisture_uptake(f),\n                \"lca_ghg\": lca_ghg(f),\n                \"\
    cost\": material_cost(f),\n                \"compliance\": compliance_check(f),\n                \"novelty_score\": novelty_score(f)\n\
    \            }\n        if \"curing profile\" in prompt and \"bamboo\" in prompt:\n            f = Formulation(\n    \
    \            fibers={\"bamboo\": 30},\n                matrix={\"PLA\": 70},\n                additives={},\n        \
    \        curing_temp=185,\n                curing_time=10,\n                pressure=150\n            )\n            return\
    \ {\n                \"formulation\": asdict(f),\n                \"curing_energy_kJ\": curing_energy(f),\n          \
    \      \"predicted_modulus\": predict_elastic_modulus(f)\n            }\n        if \"predict\" in prompt and \"hemp\"\
    \ in prompt and \"PLA\" in prompt:\n            f = Formulation(\n                fibers={\"hemp\": 30},\n           \
    \     matrix={\"PLA\": 70},\n                additives={},\n                curing_temp=185,\n                curing_time=15,\n\
    \                pressure=150\n            )\n            return {\n                \"predicted_tensile_strength\": predict_tensile_strength(f),\n\
    \                \"predicted_modulus\": predict_elastic_modulus(f),\n                \"predicted_density\": predict_density(f)\n\
    \            }\n        if \"novel\" in prompt and \"chitosan\" in prompt and \"lignin\" in prompt:\n            f = Formulation(\n\
    \                fibers={\"basalt\": 25},\n                matrix={\"chitosan\": 40, \"lignin\": 35},\n              \
    \  additives={\"taro\": 5},\n                curing_temp=170,\n                curing_time=20,\n                pressure=160\n\
    \            )\n            return {\n                \"formulation\": asdict(f),\n                \"predicted_tensile_strength\"\
    : predict_tensile_strength(f),\n                \"fire_retardancy\": \"UL-94 V0 estimated\",\n                \"novelty_score\"\
    : novelty_score(f),\n                \"patent_gap_score\": patent_gap_score(f)\n            }\n        if \"LCA\" in prompt\
    \ and \"flax\" in prompt:\n            f = Formulation(\n                fibers={\"flax\": 40},\n                matrix={\"\
    PHA\": 60},\n                additives={},\n                curing_temp=180,\n                curing_time=12,\n      \
    \          pressure=140\n            )\n            return {\n                \"lca_ghg\": lca_ghg(f),\n             \
    \   \"benchmark\": \"glass/epoxy: 4.5 kg CO2e/kg\",\n                \"savings_percent\": (4.5 - lca_ghg(f)) / 4.5 * 100\n\
    \            }\n        if \"cost\" in prompt and \"jute\" in prompt:\n            f = optimize_formulation(50, 2.5, 2.5)\n\
    \            return {\n                \"formulation\": asdict(f),\n                \"cost\": material_cost(f),\n    \
    \            \"strength_retained_percent\": predict_tensile_strength(f) / 50 * 100\n            }\n        if \"degradation\"\
    \ in prompt and \"starch\" in prompt:\n            f = Formulation(\n                fibers={},\n                matrix={\"\
    starch\": 70, \"PLA\": 30},\n                additives={},\n                curing_temp=160,\n                curing_time=5,\n\
    \                pressure=100\n            )\n            return {\n                \"remaining_mass_180_days\": degradation_model(f,\
    \ 180, 25, 60),\n                \"biodegradation_time_days\": biodegradation_time(f)\n            }\n        if \"certification\"\
    \ in prompt and \"basalt\" in prompt and \"taro\" in prompt:\n            f = Formulation(\n                fibers={\"\
    basalt\": 20},\n                matrix={\"taro\": 50, \"starch\": 30},\n                additives={},\n              \
    \  curing_temp=170,\n                curing_time=15,\n                pressure=150\n            )\n            return\
    \ compliance_check(f)\n        if \"patent\" in prompt and \"taro\" in prompt:\n            f = Formulation(\n       \
    \         fibers={\"basalt\": 15},\n                matrix={\"taro\": 60, \"PLA\": 25},\n                additives={\"\
    chitosan\": 5},\n                curing_temp=175,\n                curing_time=18,\n                pressure=155\n   \
    \         )\n            return {\n                \"patent_gap_score\": patent_gap_score(f),\n                \"recommendation\"\
    : \"File provisional patent on basalt-taro-chitosan composites for aerospace interiors\"\n            }\n        if \"\
    injection\" in prompt and \"basalt\" in prompt and \"PLA\" in prompt:\n            f = Formulation(\n                fibers={\"\
    basalt\": 40},\n                matrix={\"PLA\": 60},\n                additives={},\n                curing_temp=185,\n\
    \                curing_time=0,\n                pressure=150\n            )\n            return {\n                \"\
    melt_temp\": 185,\n                \"mold_temp\": 25,\n                \"injection_speed\": 80,  # mm/s\n            \
    \    \"void_fraction\": void_fraction(f),\n                \"optimize_pressure\": \"Increase to 180 bar to reduce voids\
    \ <1%\"\n            }\n        return {\"error\": \"Prompt not recognized\"}\n\nclass TestBiocompositeExpert(unittest.TestCase):\n\
    \    def setUp(self):\n        self.engine = SkillEngine()\n\n    def test_db_access(self):\n        self.assertEqual(BiopolymerDB.get(\"\
    PLA\").density, 1.24)\n\n    def test_predict_strength(self):\n        f = Formulation(\n            fibers={\"basalt\"\
    : 30},\n            matrix={\"PLA\": 70},\n            additives={},\n            curing_temp=180,\n            curing_time=15,\n\
    \            pressure=150\n        )\n        s = predict_tensile_strength(f)\n        self.assertGreater(s, 200)\n\n\
    \    def test_optimize_formulation(self):\n        f = optimize_formulation(80, 5, 2)\n        self.assertIsNotNone(f)\n\
    \        self.assertGreater(predict_tensile_strength(f), 50)\n\n    def test_lca(self):\n        f = Formulation(\n  \
    \          fibers={\"flax\": 40},\n            matrix={\"PHA\": 60},\n            additives={},\n            curing_temp=180,\n\
    \            curing_time=12,\n            pressure=140\n        )\n        ghg = lca_ghg(f)\n        self.assertLess(ghg,\
    \ 3)\n\n    def test_cost(self):\n        f = Formulation(\n            fibers={\"jute\": 30},\n            matrix={\"\
    PBS\": 70},\n            additives={},\n            curing_temp=175,\n            curing_time=10,\n            pressure=140\n\
    \        )\n        c = material_cost(f)\n        self.assertLess(c, 4)\n\n    def test_compliance(self):\n        f =\
    \ Formulation(\n            fibers={},\n            matrix={\"starch\": 60, \"taro\": 40},\n            additives={},\n\
    \            curing_temp=160,\n            curing_time=5,\n            pressure=100\n        )\n        comp = compliance_check(f)\n\
    \        self.assertTrue(comp[\"ASTM_D6866\"])\n\n    def test_degradation(self):\n        f = Formulation(\n        \
    \    fibers={},\n            matrix={\"starch\": 100},\n            additives={},\n            curing_temp=150,\n    \
    \        curing_time=3,\n            pressure=100\n        )\n        rem = degradation_model(f, 60, 25, 60)\n       \
    \ self.assertLess(rem, 50)\n\n    def test_novelty(self):\n        f = Formulation(\n            fibers={\"basalt\": 20},\n\
    \            matrix={\"taro\": 80},\n            additives={},\n            curing_temp=170,\n            curing_time=15,\n\
    \            pressure=150\n        )\n        self.assertGreater(novelty_score(f), 0.4)\n\n    def test_handle_prompt(self):\n\
    \        res = self.engine.handle(\"Formulate basalt fiber taro composite 80 MPa\")\n        self.assertIn(\"predicted_tensile_strength\"\
    , res)\n\n    def test_void_fraction(self):\n        f = Formulation(\n            fibers={\"basalt\": 40},\n        \
    \    matrix={\"PLA\": 60},\n            additives={},\n            curing_temp=185,\n            curing_time=0,\n    \
    \        pressure=120\n        )\n        vf = void_fraction(f)\n        self.assertGreater(vf, 0.005)\n\nif __name__\
    \ == \"__main__\":\n    unittest.main()"
examples:
- description: Load and use the Biocomposites & Eco-Materials Formulation Expert skill
  usage: 'from revvel_skills import load_skill

    skill = load_skill(''biocomposites_formulation'')

    result = skill.execute(params)'
schema_version: '1.0'
