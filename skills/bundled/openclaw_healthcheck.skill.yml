name: openclaw_healthcheck
title: Healthcheck
version: 1.0.0
description: Host security hardening and risk-tolerance configuration for OpenClaw deployments. Use when a user asks for security
  audits, firewall/SSH/update hardening, risk posture, exposure review, OpenClaw cron scheduling for periodic checks, or version
  status checks on a machine running OpenClaw (laptop, workstation, Pi, VPS).
metadata:
  author: OpenClaw
  category: Automation & Productivity
  tags:
  - openclaw
  - bundled
  - healthcheck
  source: openclaw-bundled
  created_at: '2026-02-16'
  updated_at: '2026-02-16'
dependencies:
  tools: []
install: []
implementation:
  type: markdown_prompt
  language: markdown
  content: "---\nname: healthcheck\ndescription: Host security hardening and risk-tolerance configuration for OpenClaw deployments.\
    \ Use when a user asks for security audits, firewall/SSH/update hardening, risk posture, exposure review, OpenClaw cron\
    \ scheduling for periodic checks, or version status checks on a machine running OpenClaw (laptop, workstation, Pi, VPS).\n\
    ---\n\n# OpenClaw Host Hardening\n\n## Overview\n\nAssess and harden the host running OpenClaw, then align it to a user-defined\
    \ risk tolerance without breaking access. Use OpenClaw security tooling as a first-class signal, but treat OS hardening\
    \ as a separate, explicit set of steps.\n\n## Core rules\n\n- Recommend running this skill with a state-of-the-art model\
    \ (e.g., Opus 4.5, GPT 5.2+). The agent should self-check the current model and suggest switching if below that level;\
    \ do not block execution.\n- Require explicit approval before any state-changing action.\n- Do not modify remote access\
    \ settings without confirming how the user connects.\n- Prefer reversible, staged changes with a rollback plan.\n- Never\
    \ claim OpenClaw changes the host firewall, SSH, or OS updates; it does not.\n- If role/identity is unknown, provide recommendations\
    \ only.\n- Formatting: every set of user choices must be numbered so the user can reply with a single digit.\n- System-level\
    \ backups are recommended; try to verify status.\n\n## Workflow (follow in order)\n\n### 0) Model self-check (non-blocking)\n\
    \nBefore starting, check the current model. If it is below state-of-the-art (e.g., Opus 4.5, GPT 5.2+), recommend switching.\
    \ Do not block execution.\n\n### 1) Establish context (read-only)\n\nTry to infer 1–5 from the environment before asking.\
    \ Prefer simple, non-technical questions if you need confirmation.\n\nDetermine (in order):\n\n1. OS and version (Linux/macOS/Windows),\
    \ container vs host.\n2. Privilege level (root/admin vs user).\n3. Access path (local console, SSH, RDP, tailnet).\n4.\
    \ Network exposure (public IP, reverse proxy, tunnel).\n5. OpenClaw gateway status and bind address.\n6. Backup system\
    \ and status (e.g., Time Machine, system images, snapshots).\n7. Deployment context (local mac app, headless gateway host,\
    \ remote gateway, container/CI).\n8. Disk encryption status (FileVault/LUKS/BitLocker).\n9. OS automatic security updates\
    \ status.\n   Note: these are not blocking items, but are highly recommended, especially if OpenClaw can access sensitive\
    \ data.\n10. Usage mode for a personal assistant with full access (local workstation vs headless/remote vs other).\n\n\
    First ask once for permission to run read-only checks. If granted, run them by default and only ask questions for items\
    \ you cannot infer or verify. Do not ask for information already visible in runtime or command output. Keep the permission\
    \ ask as a single sentence, and list follow-up info needed as an unordered list (not numbered) unless you are presenting\
    \ selectable choices.\n\nIf you must ask, use non-technical prompts:\n\n- “Are you using a Mac, Windows PC, or Linux?”\n\
    - “Are you logged in directly on the machine, or connecting from another computer?”\n- “Is this machine reachable from\
    \ the public internet, or only on your home/network?”\n- “Do you have backups enabled (e.g., Time Machine), and are they\
    \ current?”\n- “Is disk encryption turned on (FileVault/BitLocker/LUKS)?”\n- “Are automatic security updates enabled?”\n\
    - “How do you use this machine?”\n  Examples:\n  - Personal machine shared with the assistant\n  - Dedicated local machine\
    \ for the assistant\n  - Dedicated remote machine/server accessed remotely (always on)\n  - Something else?\n\nOnly ask\
    \ for the risk profile after system context is known.\n\nIf the user grants read-only permission, run the OS-appropriate\
    \ checks by default. If not, offer them (numbered). Examples:\n\n1. OS: `uname -a`, `sw_vers`, `cat /etc/os-release`.\n\
    2. Listening ports:\n   - Linux: `ss -ltnup` (or `ss -ltnp` if `-u` unsupported).\n   - macOS: `lsof -nP -iTCP -sTCP:LISTEN`.\n\
    3. Firewall status:\n   - Linux: `ufw status`, `firewall-cmd --state`, `nft list ruleset` (pick what is installed).\n\
    \   - macOS: `/usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate` and `pfctl -s info`.\n4. Backups (macOS):\
    \ `tmutil status` (if Time Machine is used).\n\n### 2) Run OpenClaw security audits (read-only)\n\nAs part of the default\
    \ read-only checks, run `openclaw security audit --deep`. Only offer alternatives if the user requests them:\n\n1. `openclaw\
    \ security audit` (faster, non-probing)\n2. `openclaw security audit --json` (structured output)\n\nOffer to apply OpenClaw\
    \ safe defaults (numbered):\n\n1. `openclaw security audit --fix`\n\nBe explicit that `--fix` only tightens OpenClaw defaults\
    \ and file permissions. It does not change host firewall, SSH, or OS update policies.\n\nIf browser control is enabled,\
    \ recommend that 2FA be enabled on all important accounts, with hardware keys preferred and SMS not sufficient.\n\n###\
    \ 3) Check OpenClaw version/update status (read-only)\n\nAs part of the default read-only checks, run `openclaw update\
    \ status`.\n\nReport the current channel and whether an update is available.\n\n### 4) Determine risk tolerance (after\
    \ system context)\n\nAsk the user to pick or confirm a risk posture and any required open services/ports (numbered choices\
    \ below).\nDo not pigeonhole into fixed profiles; if the user prefers, capture requirements instead of choosing a profile.\n\
    Offer suggested profiles as optional defaults (numbered). Note that most users pick Home/Workstation Balanced:\n\n1. Home/Workstation\
    \ Balanced (most common): firewall on with reasonable defaults, remote access restricted to LAN or tailnet.\n2. VPS Hardened:\
    \ deny-by-default inbound firewall, minimal open ports, key-only SSH, no root login, automatic security updates.\n3. Developer\
    \ Convenience: more local services allowed, explicit exposure warnings, still audited.\n4. Custom: user-defined constraints\
    \ (services, exposure, update cadence, access methods).\n\n### 5) Produce a remediation plan\n\nProvide a plan that includes:\n\
    \n- Target profile\n- Current posture summary\n- Gaps vs target\n- Step-by-step remediation with exact commands\n- Access-preservation\
    \ strategy and rollback\n- Risks and potential lockout scenarios\n- Least-privilege notes (e.g., avoid admin usage, tighten\
    \ ownership/permissions where safe)\n- Credential hygiene notes (location of OpenClaw creds, prefer disk encryption)\n\
    \nAlways show the plan before any changes.\n\n### 6) Offer execution options\n\nOffer one of these choices (numbered so\
    \ users can reply with a single digit):\n\n1. Do it for me (guided, step-by-step approvals)\n2. Show plan only\n3. Fix\
    \ only critical issues\n4. Export commands for later\n\n### 7) Execute with confirmations\n\nFor each step:\n\n- Show\
    \ the exact command\n- Explain impact and rollback\n- Confirm access will remain available\n- Stop on unexpected output\
    \ and ask for guidance\n\n### 8) Verify and report\n\nRe-check:\n\n- Firewall status\n- Listening ports\n- Remote access\
    \ still works\n- OpenClaw security audit (re-run)\n\nDeliver a final posture report and note any deferred items.\n\n##\
    \ Required confirmations (always)\n\nRequire explicit approval for:\n\n- Firewall rule changes\n- Opening/closing ports\n\
    - SSH/RDP configuration changes\n- Installing/removing packages\n- Enabling/disabling services\n- User/group modifications\n\
    - Scheduling tasks or startup persistence\n- Update policy changes\n- Access to sensitive files or credentials\n\nIf unsure,\
    \ ask.\n\n## Periodic checks\n\nAfter OpenClaw install or first hardening pass, run at least one baseline audit and version\
    \ check:\n\n- `openclaw security audit`\n- `openclaw security audit --deep`\n- `openclaw update status`\n\nOngoing monitoring\
    \ is recommended. Use the OpenClaw cron tool/CLI to schedule periodic audits (Gateway scheduler). Do not create scheduled\
    \ tasks without explicit approval. Store outputs in a user-approved location and avoid secrets in logs.\nWhen scheduling\
    \ headless cron runs, include a note in the output that instructs the user to call `healthcheck` so issues can be fixed.\n\
    \n### Required prompt to schedule (always)\n\nAfter any audit or hardening pass, explicitly offer scheduling and require\
    \ a direct response. Use a short prompt like (numbered):\n\n1. “Do you want me to schedule periodic audits (e.g., daily/weekly)\
    \ via `openclaw cron add`?”\n\nIf the user says yes, ask for:\n\n- cadence (daily/weekly), preferred time window, and\
    \ output location\n- whether to also schedule `openclaw update status`\n\nUse a stable cron job name so updates are deterministic.\
    \ Prefer exact names:\n\n- `healthcheck:security-audit`\n- `healthcheck:update-status`\n\nBefore creating, `openclaw cron\
    \ list` and match on exact `name`. If found, `openclaw cron edit <id> ...`.\nIf not found, `openclaw cron add --name <name>\
    \ ...`.\n\nAlso offer a periodic version check so the user can decide when to update (numbered):\n\n1. `openclaw update\
    \ status` (preferred for source checkouts and channels)\n2. `npm view openclaw version` (published npm version)\n\n##\
    \ OpenClaw command accuracy\n\nUse only supported commands and flags:\n\n- `openclaw security audit [--deep] [--fix] [--json]`\n\
    - `openclaw status` / `openclaw status --deep`\n- `openclaw health --json`\n- `openclaw update status`\n- `openclaw cron\
    \ add|list|runs|run`\n\nDo not invent CLI flags or imply OpenClaw enforces host firewall/SSH policies.\n\n## Logging and\
    \ audit trail\n\nRecord:\n\n- Gateway identity and role\n- Plan ID and timestamp\n- Approved steps and exact commands\n\
    - Exit codes and files modified (best effort)\n\nRedact secrets. Never log tokens or full credential contents.\n\n## Memory\
    \ writes (conditional)\n\nOnly write to memory files when the user explicitly opts in and the session is a private/local\
    \ workspace\n(per `docs/reference/templates/AGENTS.md`). Otherwise provide a redacted, paste-ready summary the user can\n\
    decide to save elsewhere.\n\nFollow the durable-memory prompt format used by OpenClaw compaction:\n\n- Write lasting notes\
    \ to `memory/YYYY-MM-DD.md`.\n\nAfter each audit/hardening run, if opted-in, append a short, dated summary to `memory/YYYY-MM-DD.md`\n\
    (what was checked, key findings, actions taken, any scheduled cron jobs, key decisions,\nand all commands executed). Append-only:\
    \ never overwrite existing entries.\nRedact sensitive host details (usernames, hostnames, IPs, serials, service names,\
    \ tokens).\nIf there are durable preferences or decisions (risk posture, allowed ports, update policy),\nalso update `MEMORY.md`\
    \ (long-term memory is optional and only used in private sessions).\n\nIf the session cannot write to the workspace, ask\
    \ for permission or provide exact entries\nthe user can paste into the memory files.\n"
examples: []
schema_version: '1.0'
